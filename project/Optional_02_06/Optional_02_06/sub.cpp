#include "stdafx.h"

void InitLight(Light& light)
{
	//ライトは右側から当たっている。
	light.directionLight.direction.x = 1.0f;
	light.directionLight.direction.y = -1.0f;
	light.directionLight.direction.z = -1.0f;
	light.directionLight.direction.Normalize();
	//ライトのカラーは白。
	light.directionLight.color.x = 0.5f;
	light.directionLight.color.y = 0.5f;
	light.directionLight.color.z = 0.5f;

	//視点の位置を設定する。
	light.eyePos = g_camera3D->GetPosition();
}
void InitModel(Model& model, Model& bgmodel, Light& light)
{
	//モデルを初期化するための情報を構築する。
	ModelInitData modelInitData;
	modelInitData.m_tkmFilePath = "Assets/modelData/teapot.tkm";
	//使用するシェーダーファイルパスを設定する。
	modelInitData.m_fxFilePath = "Assets/shader/sample.fx";
	//ディレクションライトの情報を定数バッファとしてディスクリプタヒープに登録するために
	//モデルの初期化情報として渡す。
	modelInitData.m_expandConstantBuffer = &light;
	modelInitData.m_expandConstantBufferSize = sizeof(light);
	//初期化情報を使ってモデルを初期化する。
	
	model.Init(modelInitData);
	model.UpdateWorldMatrix({ 0.0f, 50.0f, 0.0f }, g_quatIdentity, g_vec3One);
	modelInitData.m_tkmFilePath = "Assets/modelData/bg.tkm";
	bgmodel.Init(modelInitData);
}
void RotateLight(Light& light)
{
	Quaternion qRot;
	qRot.SetRotationDegY(g_pad[0]->GetLStickXF());
	qRot.Apply(light.directionLight.direction);
	qRot.SetRotationDegX(g_pad[0]->GetLStickYF());
	qRot.Apply(light.directionLight.direction);
}